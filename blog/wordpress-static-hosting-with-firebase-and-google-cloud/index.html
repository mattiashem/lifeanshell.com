<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <link rel="icon" href="img/favicon.ico" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Spent most of my days with a shell, deploys apps, writing code ore fixing problems with automating, This is some of the stuff a work on right now " />
        <meta name="keywords" content="kubernernetes samma.io sre linux docker devops ks8 help blog fix problems" />
        <meta property="og:title" content="Lifeandshell - Mattias Hemmingsson" />
        <meta property="og:type" content="devsecops devops sre drones hacking" />
        <meta property="og:url" content="https://lifeadnshell.com" />
        <meta property="og:description" content="Lifeandshell - Mattias Hemmingsson - SRE Devops - And more " />

    <title>Mattias Hemmingsson {'rendered': 'WordPress static hosting with firebase and google cloud'} </title>
    <!-- font icons -->
    <link rel="stylesheet" href="/assets/vendors/themify-icons/css/themify-icons.css">
    <!-- Bootstrap + Steller main styles -->
	<link rel="stylesheet" href="/assets/css/steller.css">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3SYH00HY9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3SYH00HY9X');
</script>

</head>
<body data-spy="scroll" data-target=".navbar" data-offset="40" id="home">

    <!-- Page navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" data-spy="affix" data-offset-top="0">
        <div class="container">
            <a class="navbar-brand" href="#"><img src="/img/hrb.png" alt=""></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/blog">Blog</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/">Contact</a>
                    </li>
                </ul>
            </div>
        </div>          
    </nav>
    <!-- End of page navibation -->
    <!-- Blog Section -->
    <section id="blog" class="section">
        <div class="container text-center">
            <h6 class="subtitle"></h6>
            <p class="mb-5 pb-4"></p>

            <div class="row text-left">

    <h2>WordPress static hosting with firebase and google cloud</h2>
    <p>
<p>Some time ago i started looking to move this wordpress blog into a static file blog system. So to find the best tool a started to test the different blog tools like jekyll and hugo.</p>



<p>They all worked good but a found it hard to edit my blogs in static files and also to generate and then deploy the site. Its hard to move away from wordpress when you have started. So then gave up the work on moving to a static file blog.</p>



<p>But during the latest time i have started to work more and more on firebase and cloud functions on the google cloud platform.<br>So then i started to again think about moving wordpress to a static file hosting and this time i got it to work !</p>



<h2 class="wp-block-heading">WordPress, Firebase rendering at request</h2>



<p>The first approtch was to use the wordpress API and fetch all the post and pages. I then saved the json from the api into the firebase database.<br>Then a added a small request webbserver and then a got a request to /blog/name i could query the firebase database for the post then render the json trow a teplate and return the html to the client.</p>



<p>This work well for <a href="https://hacking.robots.beer">https://hacking.robots.beer</a> that i have setup to use this way. But the speed for getting the pages are slow and its not really any better then my wordpress I had (will its less request ).</p>



<h2 class="wp-block-heading">WordPress, Firebase render to bucket</h2>



<p>To get the speed a wanted then a need to render tha pages as one as store them into a bucket. Now in firebase you can access the hosting bucket (Dont now why) so i need to use a other bucket and a Google Loadbalanser to get the the traffic to my page.<br>So for this i hade to first create a cloud fucntions that connected to the wordpress api and got all the post and pages. Then run them trow my templating to get html pages.<br>The html pages where then uploaded to a google cloud bucket.<br>And the result is the blog you are reading now.<br><br>To upload the media i use the wp-stateless plugin in wordpress that are connected to the same bucket.</p>



<p></p>



<h2 class="wp-block-heading">The code</h2>



<p>Here is a link to the code i use https://github.com/mattiashem/wordpress-firebase This is the raw and i will work some more to have the code render multiple sites to different buckets and also clean up the code ðŸ™‚</p>



<p></p>



<p></p>
</p>

            </div>
        </div>
    </section>


    <!-- Page Footer -->
    <footer class="page-footer">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-sm-6">
                    <p>Copyright <script>document.write(new Date().getFullYear())</script> &copy; <a href="http://hacking.robots.beer" target="_blank">Mattias Hemmingsson / h.r.b AB </a></p>
                </div>
                <div class="col-sm-6">
                    <div class="socials">
                        <a class="social-item" href="javascript:void(0)"><i class="ti-github"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer> 
    <!-- End of page footer -->
	
	<!-- core  -->
    <script src="/assets/vendors/jquery/jquery-3.4.1.js"></script>
    <script src="/assets/vendors/bootstrap/bootstrap.bundle.js"></script>
    <!-- bootstrap 3 affix -->
	<script src="/assets/vendors/bootstrap/bootstrap.affix.js"></script>

    <!-- steller js -->
    <script src="/assets/js/steller.js"></script>

</body>
</html>